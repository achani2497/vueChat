<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <title>Chat con Vuejs</title>
</head>
<body>
   
    <!-- <section id="app" class="hero is-fullheight bkg-1">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">Chat</h1>
                <h2 class="subtitle">Subtitulo</h2>

                <template v-if="step === 'nick'">
                    <div class="columns">
                        <div class="column is-6">
                            <div class="field has-addons">
                                <div class="control is-expanded">
                                    <input v-model="username" class="input is-medium" type="text"
                                        placeholder="Ingrese su nombre de usuario" @keyup.enter="signIn">
                                </div>
                                <div class="control">
                                    <a @click="signIn" class="button is-info is-medium">
                                        Ingresar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
                <template v-else>
                    <div v-if="messages.length" class="chat-container">
                        <div v-for="item in messages" :class="{ 'has-text-right': username === item.username }">
                            <div class="box chat-message" :class="{ 'me': username === item.username }">
                                <span class="has-text-weight-bold">{{ item.username }}</span> - {{ item.message }}
                                <span
                                    class="is-italic has-text-grey-light is-size-7">{{ new Date(item.date).toLocaleDateString() }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="field has-addons">
                        <div v-if="typingMessage !== ''">
                            {{typingMessage}}
                        </div>
                        <div class="control is-expanded">
                            <input v-model="message" class="input is-medium" type="text"
                                placeholder="Ingrese el mensaje" @input="informTyping" @keyup.enter="send">
                        </div>
                        <div class="control">
                            <a class="button is-info is-medium">
                                Enviar
                            </a>
                        </div>
                    </div>
                </template>

            </div>
        </div>
        <footer v-if="step === 'chat'" class="hero-foot">
            <div class="container section has-text-centered">
                <p>Conectado como <b>{{ username }}</b></p>
            </div>
        </footer>
    </section> -->
    <div id="app">
        <div v-if="step === 'nick'" class="centered-flex-container bkg-1">
            <div class="info glass">
                <div class="titles">
                    <h1>Bienvenidx a mi chat!</h1>
                    <h2>Por favor, ingres√° un nick para poder empezar a usar el chat</h2>
                </div>
                <input v-model="username" class="" type="text" placeholder="Ingrese su nick" @keyup.enter="signIn">
                <button type="button" class="btn-grad">Entrar!</button>
            </div>
        </div>
        <div v-else class="container bkg-2">
            <div v-if="messages.length" id="chat-container" class="chat glass">
                <div v-for="item in messages" class="message-container" :class="{'has-text-right': username === item.username }">
                    <div class="message glass">
                        <span class="message-info">
                            {{ item.username === username? 'Yo' : item.username }} - {{ new Date(item.date).toLocaleDateString() }} 
                        </span>
                        <span class="message-content">{{ item.message }}</span>
                    </div>
                </div>
                <div v-if="typingMessage !== ''" class="typing">
                    {{typingMessage}}
                </div>
            </div>
            <div class="chat-input glass">
                <input v-model="message" type="text" placeholder="Ingrese el mensaje" @input="informTyping" @keyup.enter="send">
            </div>
        </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
    <script src="./chat.js"></script>
</body>
</html>